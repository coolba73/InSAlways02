<div id='flowtest02_main'>

    <br>

    <div id="flowtest02_container">
        <div style="margin-left: 10px">
            <button mat-raised-button color="warn" (click)="this.NewFlow()" >New</button>
            <button mat-raised-button color="primary" (click)="this.SaveFlow_Click()" >Save</button>
            <button mat-raised-button color="primary" (click)="this.OpenFlow()" >Open</button>
            <button mat-raised-button color="primary" (click)="this.AddFlow()"  >Add Flow</button>
            <button mat-raised-button color="primary" (click)='btnProperty_Click()'  >Property</button>
            <i> {{this.title}}</i>
            <button mat-raised-button color="accent" (click)="Run_Click()" >Run</button>
        </div>
      
        <div id='canvas_container2'>
          <drawcanvas #fcvs (MouseUp)='Canvas_MouseUp()' [MyId]="'canvas_container2'" ></drawcanvas>
        </div>

    </div>
    

      <mat-tab-group>
          
        <mat-tab label="Description">
            <textarea id="summernote" class="form-control" ></textarea>
        </mat-tab>

        <mat-tab label="Data">

            <div class="dx-field" style="width: 450px; margin-left: 10px">
                <div class="dx-field-label">Data Table</div>
                <div class="dx-field-value">
                    <dx-select-box #cboDataTable [items]="datatables" (selectedItemChange) = 'cboDataTablesChanges()'></dx-select-box>
                </div>
            </div>

            <dx-data-grid id="gridContainer" 
            [dataSource]="dsflowResult"  
            style="height: 350px"
            >
            <dxo-load-panel [enabled]="true"></dxo-load-panel>
            <dxo-scrolling mode="virtual"></dxo-scrolling>
            <dxo-sorting mode="none"></dxo-sorting>

            <dxo-selection mode="single"></dxo-selection>

          </dx-data-grid>
        </mat-tab>

      </mat-tab-group>
  
  </div>



<!--
    #########################################################################################

    pop input box

    #########################################################################################
-->
<dx-popup   class="popup" 
            [width]="600" 
            [height]="250" 
            [showTitle]="true" 
            [title]="inputBoxTitle"
            [dragEnabled]="true" 
            [closeOnOutsideClick]="true"
            [(visible)]="popupVisible"
            >
    <div *dxTemplate="let data of 'content'">

        <mat-form-field class="example-full-width" style="width:550px">
            <input #txtTitle matInput placeholder="Input Text" type="text" (keyup.enter)="OK_Click(txtTitle.value)">
        </mat-form-field>

        <div style="margin-top: 10px">
            <button mat-raised-button color="warn" style="float: right;  margin-left: 10px" (click)="btnNewCancel_Click()" >Cancel</button>
            <button mat-raised-button color="primary" (click)="OK_Click(txtTitle.value)" style="float: right;">OK</button>
        </div>

    </div>

</dx-popup>

<!--
    #########################################################################################

    load panel

    #########################################################################################
-->
<dx-load-panel
    #loadPanel
    shadingColor="rgba(0,0,0,0.4)"
    [position]="{ of: '#flowtest02_main' }"
    [(visible)]="loadingVisible"
    [showIndicator]="true"
    [showPane]="true"
    [shading]="true"
    [closeOnOutsideClick]="false"
    (onShown)="onShown()"
>
</dx-load-panel>


<!--
    #########################################################################################

    Flow List Popup

    #########################################################################################
-->
<dx-popup   class='popup' 
        [width]='600' 
        [height]='500' 
        [showTitle]='true' 
        title='Flow List' 
        [dragEnabled]='true' 
        [closeOnOutsideClick]='true'
        [(visible)]='popupVisible_FlowList'
>
    <div *dxTemplate="let data of 'content'">

        <dx-data-grid
            #grdFlowList
            id="gridContainer"
            [hoverStateEnabled]="true"
            [selectedRowKeys]="[]"
            [dataSource]="dsFlowList" 
            style="height: 350px"
            [columns]="['title']"
        >
            <dxo-load-panel [enabled]="true"></dxo-load-panel>
            <dxo-scrolling mode="virtual"></dxo-scrolling>
            <dxo-sorting mode="none"></dxo-sorting>
            <dxo-selection mode="single"></dxo-selection>

        </dx-data-grid>

        <div style="margin-top: 10px">
            <button mat-raised-button color='warn' style='float: right;  margin-left: 10px' (click)='FlowListCancel_Click()'   >Cancel</button>
            <button mat-raised-button color='primary'  style='float: right;' (click)='Open_Click()' >Open</button>
        </div>

    </div>

</dx-popup>


<!--
    #########################################################################################

    BoxProperty PopUp

    #########################################################################################
-->
<dx-popup
        class='popup'
        [width]='600'
        [height]='700'
        [showTitle]='true'
        title='BoxProperty'
        [dragEnabled]='true'
        [closeOnOutsideClick]='true'
        [(visible)]='popupVisible_BoxProperty'
        #popupProperty
>
    <div *dxTemplate=" let data of 'content' " >

        <mat-radio-group class="example-radio-group" [(ngModel)]="BoxPropertyType" >
            <mat-radio-button value="DataSet">DataSet</mat-radio-button>
            <mat-radio-button value="Calculation">Calculation</mat-radio-button>
        </mat-radio-group>
        <mat-tab-group >
            <mat-tab label="DataSet" >
               
                <div style="height: 50px; margin-top: 10px">

                    <mat-radio-group style=" margin-left: 20px" [(ngModel)]="DataSetType"  >
                        <mat-radio-button value="Stock">Stock</mat-radio-button>
                        <mat-radio-button value="Index">Index</mat-radio-button>
                        <mat-radio-button value="MarketData">Market Data</mat-radio-button>
                    </mat-radio-group>

                    <mat-checkbox class="example-margin" [(ngModel)]="UseExistData">Use Exists Data</mat-checkbox>
                </div>

                <div style="height: 400px">
                    <button mat-raised-button color='primary' (click)='SearchDataSource()' >Search</button>
                    <button mat-raised-button color='primary' (click)='AddMyDataSource()' >Add</button>
                    <button mat-raised-button color='primary' >Delete</button>

                    <mat-tab-group>
 
                        <mat-tab label="Source">

                            <dx-data-grid
                                        #grdDataSource
                                        [hoverStateEnabled]="true"
                                        [selectedRowKeys]="[]"
                                        [dataSource]="dsDataSource" 
                                        style="height: 300px"
                            >
                                <dxo-load-panel [enabled]="true"></dxo-load-panel>
                                <dxo-scrolling mode="virtual"></dxo-scrolling>
                                <dxo-sorting mode="none"></dxo-sorting>
                                <dxo-selection mode="single"></dxo-selection>
                                <dxo-search-panel 
                                                [visible]="true" 
                                                [width]="240" 
                                                placeholder="Search...">
                                </dxo-search-panel>
                    
                            </dx-data-grid>
                            
                        </mat-tab>

                        <mat-tab label="MyData">
                                <dx-data-grid
                                            #grdMyDataSource
                                            [hoverStateEnabled]="true"
                                            [selectedRowKeys]="[]"
                                            [dataSource]="dsMyDataSource" 
                                            style="height: 300px"
                                >
                                    <dxo-load-panel [enabled]="true"></dxo-load-panel>
                                    <dxo-scrolling mode="virtual"></dxo-scrolling>
                                    <dxo-sorting mode="none"></dxo-sorting>
                                    <dxo-selection mode="single"></dxo-selection>
                                    <dxo-search-panel 
                                                    [visible]="true" 
                                                    [width]="240" 
                                                    placeholder="Search...">
                                    </dxo-search-panel>
                        
                                </dx-data-grid>

                        </mat-tab>

                    </mat-tab-group>

                </div>

            </mat-tab>

            <mat-tab label="Calculation">
                    <dx-data-grid
                                #grdCalculation
                                [hoverStateEnabled]="true"
                                [selectedRowKeys]="[]"
                                [dataSource]="dsCalculation" 
                                style="height: 400px"
                    >
                        <dxo-load-panel [enabled]="true"></dxo-load-panel>
                        <dxo-scrolling mode="virtual"></dxo-scrolling>
                        <dxo-sorting mode="none"></dxo-sorting>
                        <dxo-selection mode="single"></dxo-selection>
                        <dxo-search-panel 
                                        [visible]="true" 
                                        [width]="240" 
                                        placeholder="Search...">
                        </dxo-search-panel>

                    </dx-data-grid>
            </mat-tab>

        </mat-tab-group>

        
        <div style='margin-top: 10px'>
            <button mat-raised-button color='warn' style='float: right;  margin-left: 10px' (click)='BoxProperty_Cancel_Click()'>Cancel</button>
            <button mat-raised-button color='primary'  style='float: right;' (click)='BoxProperty_OK_Click()'>OK</button>
        </div>

    </div>

</dx-popup>







